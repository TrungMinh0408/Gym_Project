<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Gym.UserProgressPage"
             Title="User Progress">

    <VerticalStackLayout Padding="12" Spacing="10">
        <HorizontalStackLayout>
            <Label x:Name="UserNameLabel" FontAttributes="Bold" FontSize="18" HorizontalOptions="StartAndExpand"/>
            <Button Text="+" Clicked="OnAddClicked" HorizontalOptions="End" WidthRequest="44"/>
        </HorizontalStackLayout>

        <CollectionView x:Name="ProgressList" SelectionMode="None" HeightRequest="520">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Border Stroke="#DDD" StrokeShape="RoundRectangle 8" Padding="10" Margin="0,6" BackgroundColor="White">
                        <HorizontalStackLayout Spacing="12">
                            <Button Text="Edit" Clicked="OnEditClicked" CommandParameter="{Binding Id}" />

                            <VerticalStackLayout HorizontalOptions="StartAndExpand">
                                <!-- bind tá»›i CreatedAt (theo model trong Gym\Models\ProgressDto.cs) -->
                                <Label Text="{Binding CreatedAt, StringFormat='{0:yyyy-MM-dd}'}" FontAttributes="Bold"/>
                                <Label Text="{Binding Summary}" FontSize="14"/>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>
                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Label x:Name="NoHistoryLabel" Text="No progress history." IsVisible="False" HorizontalOptions="Center" TextColor="Gray"/>
    </VerticalStackLayout>
</ContentPage>