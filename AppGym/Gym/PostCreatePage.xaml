<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    x:Class="Gym.PostCreatePage"
    Title="Create Post">

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="20">

            <!-- TITLE & CONTENT -->
            <Frame Padding="12" CornerRadius="10" HasShadow="True" BackgroundColor="#FFF">
                <VerticalStackLayout Spacing="12">

                    <Entry x:Name="TitleEntry"
                           Placeholder="Title"
                           FontSize="16"
                           TextColor="#333"
                           BackgroundColor="#F5F5F5"
                           HeightRequest="40"/>

                    <Editor x:Name="ContentEditor"
                            HeightRequest="160"
                            Placeholder="Write your post..."
                            FontSize="14"
                            BackgroundColor="#F5F5F5"
                            TextColor="#333"/>

                    <Label x:Name="ErrorLabel"
                           TextColor="Crimson"
                           IsVisible="False"
                           FontAttributes="Bold"
                           FontSize="12"/>

                </VerticalStackLayout>
            </Frame>

            <!-- PICK MEDIA BUTTONS -->
            <HorizontalStackLayout Spacing="12" HorizontalOptions="Center">
                <Button Text="ðŸ“· Pick Images" Clicked="OnPickImagesClicked" WidthRequest="140" />
                <Button Text="ðŸŽ¬ Pick Videos" Clicked="OnPickVideosClicked" WidthRequest="140" />
            </HorizontalStackLayout>

            <!-- IMAGES PREVIEW -->
            <CollectionView x:Name="ImagesPreview"
                            ItemsLayout="HorizontalList"
                            HeightRequest="120"
                            IsVisible="False"
                            Margin="0,10,0,0">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="0" Margin="4" CornerRadius="10" HasShadow="True" IsClippedToBounds="True">
                            <Image Source="{Binding}" Aspect="AspectFill" WidthRequest="120" HeightRequest="120"/>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- VIDEOS PREVIEW -->
            <CollectionView x:Name="VideosPreview"
                            ItemsLayout="HorizontalList"
                            HeightRequest="120"
                            IsVisible="False"
                            Margin="0,10,0,0">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="0" Margin="4" CornerRadius="10" HasShadow="True" IsClippedToBounds="True">
                            <toolkit:MediaElement Source="{Binding}"
                                                  ShouldAutoPlay="False"
                                                  Aspect="AspectFill"
                                                  WidthRequest="120"
                                                  HeightRequest="120"/>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- SUBMIT BUTTON -->
            <VerticalStackLayout Spacing="10" HorizontalOptions="Center">
                <Button x:Name="SubmitButton" Text="Submit" WidthRequest="160" HeightRequest="45" CornerRadius="12"
                        BackgroundColor="#007AFF" TextColor="White" Clicked="OnSubmitClicked"/>
                <ActivityIndicator x:Name="BusyIndicator" IsVisible="False" IsRunning="False"
                                   VerticalOptions="Center" HorizontalOptions="Center"/>
            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>

