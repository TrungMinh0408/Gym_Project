<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="Gym.LeaderboardPage"
    Title="Báº£ng xáº¿p háº¡ng">

    <VerticalStackLayout Padding="20" Spacing="16">

        <!-- ===== Title ===== -->
        <Label x:Name="TitleLabel"
               Text="ðŸ† Báº¢NG Xáº¾P Háº NG"
               FontSize="24"
               FontAttributes="Bold"
               HorizontalOptions="Center" />

        <!-- ===== Leaderboard ===== -->
        <CollectionView x:Name="LeaderboardList"
                        SelectionMode="None">

            <CollectionView.ItemTemplate>
                <DataTemplate>

                    <Border
                        Padding="12"
                        Margin="6"
                        StrokeThickness="1"
                        Stroke="#DDDDDD"
                        Background="White"
                        StrokeShape="RoundRectangle 12">

                        <HorizontalStackLayout
                            Spacing="12"
                            VerticalOptions="Center">

                            <!-- ===== Rank Circle ===== -->
                            <Border
                                WidthRequest="36"
                                HeightRequest="36"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 18">

                                <Border.Triggers>

                                    <!-- ðŸ¥‡ Top 1 -->
                                    <DataTrigger TargetType="Border"
                                                 Binding="{Binding Rank}"
                                                 Value="1">
                                        <Setter Property="BackgroundColor"
                                                Value="#FFD700"/>
                                    </DataTrigger>

                                    <!-- ðŸ¥ˆ Top 2 -->
                                    <DataTrigger TargetType="Border"
                                                 Binding="{Binding Rank}"
                                                 Value="2">
                                        <Setter Property="BackgroundColor"
                                                Value="#C0C0C0"/>
                                    </DataTrigger>

                                    <!-- ðŸ¥‰ Top 3 -->
                                    <DataTrigger TargetType="Border"
                                                 Binding="{Binding Rank}"
                                                 Value="3">
                                        <Setter Property="BackgroundColor"
                                                Value="#CD7F32"/>
                                    </DataTrigger>

                                </Border.Triggers>

                                <Label Text="{Binding Rank}"
                                       FontAttributes="Bold"
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center"/>
                            </Border>

                            <!-- ===== User Info ===== -->
                            <VerticalStackLayout
                                HorizontalOptions="FillAndExpand"
                                Spacing="2">

                                <Label Text="{Binding UserName}"
                                       FontSize="18"
                                       FontAttributes="Bold"/>

                                <Label Text="NgÆ°á»i tham gia"
                                       FontSize="12"
                                       TextColor="Gray"/>
                            </VerticalStackLayout>

                            <!-- ===== Points ===== -->
                            <Label Text="{Binding Points, StringFormat='{0} pts'}"
                                   FontSize="18"
                                   FontAttributes="Bold">

                                <Label.Triggers>
                                    <!-- Highlight Ä‘iá»ƒm Top 1 -->
                                    <DataTrigger TargetType="Label"
                                                 Binding="{Binding Rank}"
                                                 Value="1">
                                        <Setter Property="TextColor"
                                                Value="#D32F2F"/>
                                    </DataTrigger>
                                </Label.Triggers>

                            </Label>

                        </HorizontalStackLayout>

                    </Border>

                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </VerticalStackLayout>

</ContentPage>
